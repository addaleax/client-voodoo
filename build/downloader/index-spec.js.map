{"version":3,"sources":["downloader/index-spec.js","downloader/index-spec.ts"],"names":[],"mappings":"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","file":"downloader/index-spec.js","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, Promise, generator) {\n    return new Promise(function (resolve, reject) {\n        generator = generator.call(thisArg, _arguments);\n        function cast(value) { return value instanceof Promise && value.constructor === Promise ? value : new Promise(function (resolve) { resolve(value); }); }\n        function onfulfill(value) { try { step(\"next\", value); } catch (e) { reject(e); } }\n        function onreject(value) { try { step(\"throw\", value); } catch (e) { reject(e); } }\n        function step(verb, value) {\n            var result = generator[verb](value);\n            result.done ? resolve(result.value) : cast(result.value).then(onfulfill, onreject);\n        }\n        step(\"next\", void 0);\n    });\n};\nvar express = require('express');\nvar index_1 = require('../index');\nvar path = require('path');\ndescribe('Downloader', function () {\n    let app;\n    let server;\n    let downloadDir = path.join('test-files', 'downloaded');\n    before(function (done) {\n        app = express();\n        app.use(express.static('../../test-files'));\n        server = app.listen(1337, function () {\n            done();\n        });\n    });\n    after(function (done) {\n        server.close(function () {\n            done();\n        });\n        app = null;\n        server = null;\n    });\n    it('Should work', function (done) {\n        let handle = index_1.Downloader.download('https://az764295.vo.msecnd.net/public/0.10.3/VSCode-linux64.zip', downloadDir);\n        let waited = false;\n        handle.onProgress(function (data) {\n            console.log('Download progress: ' + Math.floor(data.progress * 100) + '%');\n            console.log('Current speed: ' + Math.floor(data.curKbps) + ' kbps, peak: ' + Math.floor(data.peakKbps) + ' kbps, low: ' + Math.floor(data.lowKbps) + ', average: ' + Math.floor(data.avgKbps) + ' kbps');\n            if (data.progress > 0.5 && !waited) {\n                console.log('Having a comic relief..');\n                handle.stop()\n                    .then(() => new Promise((resolve) => setTimeout(resolve, 5000)))\n                    .then(() => handle.start())\n                    .then(function () { waited = true; console.log('Had a comic relief!'); });\n            }\n        });\n        handle.promise\n            .then(done)\n            .catch(done);\n    });\n});\n","import express = require( 'express' );\nimport http = require( 'http' );\nimport { Downloader } from '../index';\nimport path = require( 'path' );\n\ndescribe( 'Downloader', function()\n{\n\tlet app: express.Express;\n\tlet server: http.Server;\n\tlet downloadDir = path.join( 'test-files', 'downloaded' );\n\n\tbefore( function( done )\n\t{\n\t\tapp = express();\n\t\tapp.use( express.static( '../../test-files' ) );\n\t\tserver = app.listen( 1337, function()\n\t\t{\n\t\t\tdone();\n\t\t} );\n\t} );\n\n\tafter( function( done )\n\t{\n\t\tserver.close( function()\n\t\t{\n\t\t\tdone();\n\t\t} );\n\n\t\tapp = null;\n\t\tserver = null;\n\t} );\n\n\tit( 'Should work', function( done )\n\t{\n\t\tlet handle = Downloader.download( 'https://az764295.vo.msecnd.net/public/0.10.3/VSCode-linux64.zip', downloadDir );\n\n\t\tlet waited = false;\n\t\thandle.onProgress( function( data )\n\t\t{\n\t\t\tconsole.log( 'Download progress: ' + Math.floor( data.progress * 100 ) + '%' );\n\t\t\tconsole.log( 'Current speed: ' + Math.floor( data.curKbps ) + ' kbps, peak: ' + Math.floor( data.peakKbps ) + ' kbps, low: ' + Math.floor( data.lowKbps ) + ', average: ' + Math.floor( data.avgKbps ) + ' kbps' );\n\t\t\tif ( data.progress > 0.5 && !waited ) {\n\t\t\t\tconsole.log( 'Having a comic relief..' );\n\t\t\t\thandle.stop()\n\t\t\t\t\t.then( () => new Promise( ( resolve ) => setTimeout( resolve, 5000 ) ) )\n\t\t\t\t\t.then( () => handle.start() )\n\t\t\t\t\t.then( function() { waited = true; console.log( 'Had a comic relief!' ) } );\n\t\t\t}\n\t\t} );\n\n\t\thandle.promise\n\t\t\t.then( done )\n\t\t\t.catch( done );\n\t} );\n} );"],"sourceRoot":"../../src/"}